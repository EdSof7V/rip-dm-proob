# Configuración mínima para Cloud Run
runConfig:
  minInstances: 0
  maxInstances: 1
  cpu: 1
  memoryMiB: 512
  concurrency: 1

# Variables de entorno
env:
  # Variable pública
  - variable: NEXT_PUBLIC_API_URL
    value: "https://my-app-430707315077.southamerica-west1.run.app"
    availability:
      - BUILD
      - RUNTIME

  # Variables seguras desde Secret Manager
  - variable: AZURE_AD_CLIENT_ID
    secretSource:
      secretName: projects/dashboard-manager-rip/secrets/AZURE_AD_CLIENT_ID/versions/latest
    availability:
      - RUNTIME

  - variable: AZURE_AD_CLIENT_SECRET
    secretSource:
      secretName: projects/dashboard-manager-rip/secrets/AZURE_AD_CLIENT_SECRET/versions/latest
    availability:
      - RUNTIME

  - variable: AZURE_AD_TENANT_ID
    secretSource:
      secretName: projects/dashboard-manager-rip/secrets/AZURE_AD_TENANT_ID/versions/latest
    availability:
      - RUNTIME

  - variable: NEXTAUTH_SECRET
    secretSource:
      secretName: projects/dashboard-manager-rip/secrets/NEXTAUTH_SECRET/versions/latest
    availability:
      - RUNTIME

  - variable: STORAGE_BUCKET
    value: mybucket.firebasestorage.app
    availability:
      - BUILD
      - RUNTIME

  - variable: API_KEY
    secret: myApiKeySecret

    # Same as API_KEY above but with a pinned version.
  - variable: PINNED_API_KEY
    secret: myApiKeySecret@5

    # Same as API_KEY above but with the long form secret reference as defined by Cloud Secret Manager.
  - variable: VERBOSE_API_KEY
    secret: projects/test-project/secrets/secretID

    # Same as API_KEY above but with the long form secret reference with pinned version.
  - variable: PINNED_VERBOSE_API_KEY
    secret: projects/test-project/secrets/secretID/versions/5
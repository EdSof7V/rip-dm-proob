# Configuración mínima para Cloud Run
runConfig:
  minInstances: 0
  maxInstances: 1
  cpu: 1
  memoryMiB: 512
  concurrency: 1

# Variables de entorno
env:
  # Variable pública
  - variable: NEXT_PUBLIC_API_URL
    value: "https://my-app-430707315077.southamerica-west1.run.app"
    availability:
      - BUILD
      - RUNTIME

  # Variables seguras desde Secret Manager
  - variable: AZURE_AD_CLIENT_ID
    secret: AZURE_AD_CLIENT_ID
    availability:
      - RUNTIME

  - variable: AZURE_AD_CLIENT_SECRET
    secret: AZURE_AD_CLIENT_SECRET
    availability:
      - RUNTIME

  - variable: AZURE_AD_TENANT_ID
    secret: AZURE_AD_TENANT_ID
    availability:
      - RUNTIME

  - variable: NEXTAUTH_SECRET
    secret: NEXTAUTH_SECRET
    availability:
      - RUNTIME

  - variable: STORAGE_BUCKET
    value: mybucket.firebasestorage.app
    availability:
      - BUILD
      - RUNTIME

  - variable: API_KEY
    secret: myApiKeySecret

  # Mismo API_KEY pero con una versión específica del secreto
  - variable: PINNED_API_KEY
    secret: myApiKeySecret@5

  # Referencia con el ID completo del secreto en Google Cloud Secret Manager
  - variable: VERBOSE_API_KEY
    secret: secretID

  # Referencia con versión específica del secreto
  - variable: PINNED_VERBOSE_API_KEY
    secret: secretID@5
